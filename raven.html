<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Raven â€” Map</title>
<style>
html, body {
  margin: 0; padding: 0;
  height: 100%; width: 100%;
  background: #000;
  overflow: hidden;
  font-family: sans-serif;
}
canvas {
  display: block;
  margin: auto;
  background: #111;
  border: 1px solid #555;
}
.grid-label {
  position: absolute;
  color: #888;
  font-size: 14px;
  pointer-events: none;
}
</style>
</head>
<body>
<canvas id="map" width="500" height="500"></canvas>
<script>
const canvas = document.getElementById('map');
const ctx = canvas.getContext('2d');
const DOT_SIZE = 10;
const RESET_MS = 10000;

// Draw grid (5x5 labels)
const AXIS_Y = ['A','B','C','D','E'];
const AXIS_X = [1,2,3,4,5];

function drawGrid() {
    ctx.strokeStyle = '#333';
    ctx.lineWidth = 1;
    const step = canvas.width / 5;
    for(let i=1;i<5;i++){
        // vertical lines
        ctx.beginPath();
        ctx.moveTo(i*step,0);
        ctx.lineTo(i*step,canvas.height);
        ctx.stroke();
        // horizontal lines
        ctx.beginPath();
        ctx.moveTo(0,i*step);
        ctx.lineTo(canvas.width,i*step);
        ctx.stroke();
    }
    // labels
    ctx.fillStyle = '#888';
    ctx.font = '14px sans-serif';
    for(let i=0;i<5;i++){
        ctx.fillText(AXIS_Y[i],5,i*step + 15);
        ctx.fillText(AXIS_X[i],i*step + 5,canvas.height - 5);
    }
}
drawGrid();

function drawDot(x, y, color="white") {
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.arc(x, y, DOT_SIZE/2, 0, 2 * Math.PI);
    ctx.fill();
    setTimeout(() => {
        ctx.clearRect(x - DOT_SIZE, y - DOT_SIZE, DOT_SIZE*2, DOT_SIZE*2);
        drawGrid(); // redraw grid after clearing
    }, RESET_MS);
}

// Listen for Tampermonkey messages
window.addEventListener('message', e => {
    const d = e.data;
    if(d.x !== undefined && d.y !== undefined) {
        drawDot(d.x, d.y, d.color || 'white');
    }
});
</script>
</body>
</html>

