<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Raven â€” Map</title>
<style>
html, body {
  margin: 0; padding: 0;
  height: 100%; width: 100%;
  background: #000;
  overflow: hidden;
}
canvas {
  display: block;
  margin: auto;
  background: #111;
}
</style>
</head>
<body>
<canvas id="map" width="500" height="500"></canvas>
<script>
const canvas = document.getElementById('map');
const ctx = canvas.getContext('2d');
const DOT_SIZE = 10;
const RESET_MS = 10000;

function drawDot(x, y) {
  ctx.fillStyle = "white";
  ctx.beginPath();
  ctx.arc(x, y, DOT_SIZE/2, 0, 2 * Math.PI);
  ctx.fill();
  setTimeout(() => {
    ctx.clearRect(x - DOT_SIZE, y - DOT_SIZE, DOT_SIZE*2, DOT_SIZE*2);
  }, RESET_MS);
}

window.addEventListener('message', e => {
  const d = e.data;
  if(typeof d.x !== "number" || typeof d.y !== "number") return;
  drawDot(d.x, d.y);
});
</script>
</body>
</html>
